include::ROOT:partial$variables.adoc[]

= SQL Snippets
:description: Learn the most common SQL snippets when working with {PRODUCT_NAME}
:keywords: database commands, SQL commands, delete records, delete records database, common SQL

[CAUTION]
====
Before performing destructive operations it is recommended you create a database backup.
====

[TIP]
====
When deleting data, you can replace `DELETE` with `SELECT` to view what is about to get deleted.
====

== Delete all records

[source,sql]
----
-- Record values
delete from compose_record_value;

-- Records
delete from compose_record;
----

== Delete all records of a namespace

[source,sql]
----
-- Record values
delete from compose_record_value where record_id in (select id from compose_record where rel_namespace = {NAMESPACE_ID} AND module_id = {MODULE_ID});

-- Records
delete from compose_record where rel_namespace = {NAMESPACE_ID};
----

== Delete all records of a module

[source,sql]
----
-- Record values
delete from compose_record_value where record_id in (select id from compose_record where rel_namespace = {NAMESPACE_ID} AND module_id = {MODULE_ID});

-- Records
delete from compose_record where rel_namespace = {NAMESPACE_ID} AND module_id = {MODULE_ID};
----


== Delete specific record values

[source,sql]
----
delete from compose_record_value where name = {FIELD_NAME} AND record_id in (select id from compose_record where rel_namespace = {NAMESPACE_ID} AND module_id = {MODULE_ID});
----

== Delete all soft deleted records

[source,sql]
----
-- Record values
delete from compose_record_value where record_id in (select id from compose_record where rel_namespace = {NAMESPACE_ID} AND module_id = {MODULE_ID} and deleted_at IS NOT NULL);

-- Records
delete from compose_record where rel_namespace = {NAMESPACE_ID} AND module_id = {MODULE_ID} and deleted_at IS NOT NULL;
----
